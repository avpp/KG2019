# Задача 4.

Во всех вариантах должна быть предусмотрена возможность управления областью просмотра(параметрами камеры). В идеале с помощью мыши и дополнительно с помощью клавиатуры. В простом случае будет достаточно соответствующего UI. Также, вероятно, стоит добавить вывод координатных осей, для ориентирования.  
Основные объекты задачи должны быть вынесены в классы (модели).  
Для рисования примитивов можно использовать возможности graphics'а.  
Нельзя использовать готовые инструменты, например, возможности graphics'а по повороту, масштабированию или перемещению экранной системы координат.  
При разработке программы использовать подходы и архитектуру, рассмотренные на занятиях (классы и интерфейсы Screen, Camera, Model, Scene, Vector*, Matrix* и др.).
Около каждой задачи указана ориентировочная сложность задачи. В целом, это число равно оценке при приемлемой реализации задачи.

* * *

Некоторые пояснения к задачам:

(1) В большинстве задач можно выделить несколько уровней сложности:  
А. Когда все объекты рисуются в виде набора рёбер (контуры).  
Б. Когда все объекты рисуются в виде полигонов (поверхности). Можно дополнительно задавать прозрачность поверхности.  
В. Вариант Б + простая модель освещения с источником света в точке положения камеры (без теней).

(2) В задачах, где для демонстрации требуются различные объекты (где активные действия производятся над IModel), можно сделать одну из реализаций IModel (в качестве дополнительной), которая будет загружать тела из файлов (текстовый форматы [STL](https://ru.wikipedia.org/wiki/STL_(%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0)), [OBJ](https://ru.wikipedia.org/wiki/Obj) очень просты и удобны). В некоторых случаях, вероятно, было бы удобно иметь ещё и возможность сохранения.

(3) В некоторых задачах удобно использовать интерфейс IModel. Данный интерфейс объявляет метод, позволяющий получить список полигонов/треугольников, которыми описывается фигура и, возможно, просто список вершин. Может быть есть смысл разработать класс, который удобно описывает любой объект в виде [mesh](https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%BB%D0%B8%D0%B3%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D1%81%D0%B5%D1%82%D0%BA%D0%B0)'а. А IModel, при этом, будет возвращать экземпляр этого класса.

(4) В некоторых задачах требуется описать интерфейс IFunction, позволяющий в общем виде задать зависимость координат друг от друга или же от какого-либо параметра (для линий/функций, заданных параметрически)

* * *

Варианты заданий для задачи №4:

1.  (30) Написать процедуру пересечения двух произвольных треугольников, заданных в трехмерном пространстве.  
    Пользователь задаёт координаты вершин треугольников в трёхмерном пространстве с помощью полей ввода. Для решения этой задачи необходимо разработать класс Triangle, два экземпляра которого передавать в функцию, решающую поставленную задачу и возвращающую список трёхмерных точек, являющихся вершинами контура пересечения. Если треугольники находятся в одной плоскости, то задача сводится к двумерной.
2.  (35) Написать программу построения тени от платонова тела, освещенного точечным источником.  
    Пользователь выбирает, какое именно платоново тело использовать, местоположение точечного источника света (просто точка в пространстве) и плоскость, на которой выводить тень (параметры A, B, C и D из [канонического уравнения](https://www.google.ru/search?newwindow=1&ei=wti1XZHcNceKmwXihJbgCQ&q=%D0%BA%D0%B0%D0%BD%D0%BE%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5+%D1%83%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5+%D0%BF%D0%BB%D0%BE%D1%81%D0%BA%D0%BE%D1%81%D1%82%D0%B8&oq=%D0%BA%D0%B0%D0%BD%D0%BE%D0%BD%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5+%D1%83%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5+%D0%BF%D0%BB%D0%BE%D1%81&gs_l=psy-ab.3.0.0l2j0i22i30l8.353091.80606437..80607158...0.2..0.167.1661.18j1......0....1..gws-wiz.....0..0i71j0i131j0i10i1j0i1j0i10i1i42j0i10j0i10i30j0i131i67j0i67.C6P4hAY0dYI)). Платоновы тела должны быть реализованы в виде отдельных классов, унаследованных от интерфейса IModel. Возможно, было бы удобно использовать один из порождающих паттернов проектирования для создания выбранного платонового тела.
3.  (40) Написать программу динамического поворота 3D-графика функции. Варианты функций:
    *   z = e^sin(x*3) - cos (y^2)
    *   z = x^3 - y^2
    *   z = x^(1/3) * sin(y)
    *   z = ln(x^2 + 1) / (y^2 + 2)
    *   z = (1 / (x^3 + 2)) + ln (y)
    *   z = abs(y^4 - y^3 + x^2 - x)
    *   z = x^4+y^4*(x^2+y^2)
    *   (\*) z = e^((sin(x) + cos(x)) / (x^2 + 1))(*) Усложнённая версия этого задания подразумевает [добавление](https://i.stack.imgur.com/LIwi5.png) [цветовой](https://sourceforge.net/p/gnuplot/feature-requests/_discuss/thread/7d6f49d1/0915/attachment/graphene_specular2_small.png) [градации](https://www.researchgate.net/profile/Chanchal_Barman/publication/327336589/figure/download/fig5/AS:665530616786944@1535686272579/Color-online-Left-Ab-initio-3D-band-structure-of-Sr3BiN-Right-Closer-view-of-the.png) [по](https://3.bp.blogspot.com/-gGA-OfOTy4o/Vs1bGZd--FI/AAAAAAAABw8/AH84hgg1CdE/s1600/surface.png) [оси](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSpv4toDT1V7usgG-JjcKxfR7VBLGUoMfThLX7Und1zxhs9zWnR&s) [z](https://miro.medium.com/max/575/1*J0VmAEUL0zXGvuSICg700Q.png). Набор цветов и интервалы применения задаются пользователем отдельно.  
    Пользователь выбирает выводимый на экран график функции, выбирает трёхмерную область обзора, а также детализацию графика (количество опорных точек). После этого, пользователь задаёт угловую скорость и ось вращения (не обязательно одна из осей координат) и камера начинает своё вращение вокруг заданной оси. Для удобства стоит также как-то задавать точку, в которую при вращении смотрит камера.
4.  (25) Построить на экране изображения [платоновых тел](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D0%B3%D1%80%D0%B0%D0%BD%D0%BD%D0%B8%D0%BA): тетраэдра, куба, октаэдра, икосаэдра, додекаэдра.  
    Реализовать в виде нескольких классов, унаследованных от IModel. Вершины должны генерироваться автоматически на основе заданного размера тела (радиуса описанной сферы), положения и (\*)ориентации в пространстве. (\*)Хотелось бы увидеть алгоритм генерации НЕ использующий кучу непонятных коэффициентов.
5.  (30) Написать программу, вращающую трёхмерное тело (на примере икосаэдра) вокруг заданной оси. Предусмотреть возможность выбора оси вращения (точка, принадлежащая оси и вектор-направление) и угловой скорости.  
    Конечно же, основной алгоритм вращения должен оперировать IModel'ями. В отличии от задачи 3 вращаться должна сама модель (оси координат остаются на экране неподвижными).
6.  (45) Написать программу [освещения](http://grafika.me/node/344) 3D-поверхности двумя источниками света.  
    Пользователь задаёт координаты точек положения источников света, а также их цвета с помощью соответствующего пользовательского интерфейса. Освещать стоит IModel. В качестве примеров поверхностей предлагается использовать куб, цилиндр и сферу. В рамках данной задачи потребуется учитывать некоторые параметры материала, из которого сделана поверхность. В простом случае - цвет материала. В более сложном - отражение и поглащение света.
7.  (25) Написать программу построения цилиндрических и конусных поверхностей.  
    Пользователь должен иметь возможность задавать основные параметры таких объектов: положение в пространстве, сдвиг (плоскость оснований не всегда перпендикулярна оси), внешние радиусы оснований (в случае нулевого значения одного из радиусов получается конус) и [внутренние](http://omtc-russia.ru/wp-content/uploads/2013/04/vtulka-konicheskaya-7272-bison-bial.jpg).
8.  (45) Написать программу изображения трехмерных тел с двухточечным проецированием.  
    Пользователь должен указывать координаты точек схода. В качестве модели стоит использовать IModel, а фактически продемонстрировать на примере куба, сферы и м.б. каких-либо других фигур.  
    Проецирование не должно привязываться к камере. Т.е. мы изменяем объект, а потом можем посмотреть на него с разных сторон.  
    (\*) Можно развить данную задачу до трёхточечного проецирования.
9.  (45) Написать программу построения пересечения платоновых тел произвольной плоскостью.  
    Пользователь выбирает платоново тело, указывает параметры плоскости (коэффициенты A, B, C, D из канонического уравнения плоскости). В метод, решающий задачу, передаётся IModel и экземпляр класса Plane(плоскость), а в результате возвращается массив из получившихся частей - отдельных объектов. Каждый из которых можно вывести независимо друг от друга. Кроме того, было бы замечательно увидеть сам срез (плоский многоугольник).  
    (\*) Можно развить данную задачу до пересечения любых трёхмерных тел плоскостью.
10.  (35) Написать программу построения [ленты](https://ru.wikipedia.org/wiki/%D0%9B%D0%B5%D0%BD%D1%82%D0%B0_%D0%9C%D1%91%D0%B1%D0%B8%D1%83%D1%81%D0%B0) [Мёбиуса](https://www.google.ru/search?newwindow=1&biw=1366&bih=654&tbm=isch&sa=1&ei=OzG3XdmOM-3amwWM0o2wAg&q=%D0%BB%D0%B5%D0%BD%D1%82%D0%B0+%D0%BC%D1%91%D0%B1%D0%B8%D1%83%D1%81%D0%B0&oq=%D0%BB%D0%B5%D0%BD%D1%82%D0%B0+%D0%BC%D1%91%D0%B1%D0%B8%D1%83%D1%81%D0%B0&gs_l=img.3..0j0i5i30l3j0i24l6.166798.169621..170398...0.0..0.140.935.12j1......0....1..gws-wiz-img.......0i67.7Rm9vtdc634&ved=0ahUKEwiZmP3XyL_lAhVt7aYKHQxpAyYQ4dUDCAY&uact=5).  
    Пользователь должен задавать основные её параметры, а после построения иметь возможность рассмотреть со всех сторон.  
    (\*) Было бы интересно увидеть анимацию движения вдоль плоскости от первого лица.
11.  (40) Написать программу построения [бутылки](https://ru.wikipedia.org/wiki/%D0%91%D1%83%D1%82%D1%8B%D0%BB%D0%BA%D0%B0_%D0%9A%D0%BB%D0%B5%D0%B9%D0%BD%D0%B0) [Клейна](https://www.google.ru/search?q=%D0%B1%D1%83%D1%82%D1%8B%D0%BB%D0%BA%D0%B0+%D0%BA%D0%BB%D0%B5%D0%B9%D0%BD%D0%B0&newwindow=1&source=lnms&tbm=isch&sa=X&ved=0ahUKEwihivCOzL_lAhWV7KYKHbtRBvcQ_AUIESgB&biw=1366&bih=654).  
    Пользователь должен задавать основные параметры, а после построения иметь возможность рассмотреть со всех сторон. Кроме того, было бы полезно иметь возможность указывать прозрачность стенок.
12.  (35) "[Вокселизовать](http://img.3dyuriki.com/11.11/sfera-iz-vokselei-v-zbrush.png)" [трёхмерный](http://kayrosblog.ru/wp-content/uploads/2019/01/Voksel-kirpich-dlya-trehmernoj-grafiki.jpg) [объект](https://t4.ftcdn.net/jpg/01/66/39/15/500_F_166391591_kqNbJAmwCHLaGDP7QOaj2u3yoCoFTMM3.jpg) и/или [поверхность](https://media.istockphoto.com/vectors/3d-voxel-heatmap-vector-id660591286). Пользователь должен задавать размер кубиков.  
    На входе имеется IModel, а на выходе - объект, который состоит как бы из кубиков. Было бы замечательно иметь 2 реализации. Первая возвращает список кубиков (в т.ч. и внутренние), а вторая - единый большой объект, у которого поверхность имеет соответствующую форму.
13.  (50) Написать программу для бинарных операций над трехмерными телами.  
    В идеале, на вход подуются две IModel, а в результате получается результирующая модель, являющаяся объединением, пересечением или же вычитанием одной из другой.
14.  (40) Написать программу построения цилиндра вдоль заданной замкнутой линии. Примерами таких объектов могут выступать [тор](https://upload.wikimedia.org/wikipedia/commons/1/17/Torus.png) (цилиндр вдоль окружности) и [Трилистник](https://ru.wikipedia.org/wiki/%D0%A2%D1%80%D0%B8%D0%BB%D0%B8%D1%81%D1%82%D0%BD%D0%B8%D0%BA_(%D1%83%D0%B7%D0%B5%D0%BB))(узел).  
    (\*) Интересным дополнением может служить построение заданного профиля [вдоль](https://helpx.adobe.com/ru/illustrator/using/creating-3d-objects/_jcr_content/main-pars/image_1.img.png/rs_32.png) незамкнутой линии (можно не ограничиваться прямыми отрезками).
15.  (30) Написать программу построения многоугольника вдоль заданной линии (в т.ч. замкнутой) с поворотом вокруг этой линии на заданный угол. Получается [закрученная призма](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQvBoZ2DoS9zl4E_U4OmzRMxIzCi6NjS89TI9w8rM_OxvCwQCdO&s), (\*)не обязательно построенная вдоль прямой.  
В простом случае пользователь выбирает линию из какого-либо набора функций (для начала стоит сделать просто отрезок), а также задаёт параметры многоугольника (количество углов и размер, задаваемый через радиус описанной окружности).
16.  (30) Написать программу построения [сферы с лучиками](https://sc01.alicdn.com/kf/HTB1Y5PoKVXXXXa4XXXXq6xXFXXXa/Magnetic-Hand-Acupuncture-Ball-Needle-Massage.jpg_350x350.jpg)/[иглами](https://kipmu.ru/wp-content/uploads/Spaerechinus_granularis.jpg).  
    Желательно сделать в максимально общем виде, чтобы можно было задавать количество, размер и форму лучиков (не только конусы, но и цилиндры или призмы).
17.  (30) Написать программу построения модели [болта](https://static.turbosquid.com/Preview/2014/07/10__16_23_51/Hex_bolt_small_1.jpg70b7d2b1-7c1b-4b31-abd1-dfdc0b097dd3Original.jpg) и [шурупа](https://b.3ddd.ru/media/cache/sky_gallery_preview_mid_resize_ru/model_images/0000/0000/0043/43003.526dd1f4dfec2.jpeg).  
    Пользователь должен задавать основные размеры, в т.ч. характеристики резьбы.
18.  (25) Написать программу построения трёхмерной [решётки](https://st3.depositphotos.com/1002927/14834/v/1600/depositphotos_148343629-stock-illustration-3d-cube-with-connected-dots.jpg) (из трубок/цилиндров).  
    Пользователь задаёт все параметры решётки: шаги по каждой из осей, отображаемую область, размер трубок.  В простейшем случае трубки можно представить в виде обычных линий.
19.  (30) Написать программу построения [зубчатого колеса со спицами](https://stankiexpert.ru/wp-content/uploads/2018/10/zubchatoe-koleso-3.jpg).  
    Пользователь задаёт параметры зубчатого колеса: толщина, количество зубьев, все необходимые радиусы (их будет три).
20.  (40) Написать программу, позволяющую [скруглить](https://repetitor3d.ru/wp-content/uploads/2016/12/ugly2.jpg) две и (\*)три пересекающиеся плоские грани.
21.  (35) Написать программу построения спирали (пружины). Пользователь должен иметь возможность задавать основные параметры.  
    (\*) Усложнённая версия включает в себя возможность сделать пружину с [изменяемым шагом витков](https://st3.depositphotos.com/1760000/19194/i/1600/depositphotos_191943478-stock-photo-metal-spring-3d.jpg) (можно реализовать, позволив пользователю указывать функцию, по которой будет меняться шаг или же интерполируя по ключевым точкам)  
    (\*) Ещё один вариант усложнённой версии - возможность задавать [изменяемый радиус](https://img1.wbstatic.net/large/new/8140000/8147229-1.jpg) (опять же с помощью указания функции).
